<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Garaj Yönetimi | TamŞarj</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;900&display=swap" rel="stylesheet">
<style>
body { background: linear-gradient(135deg, #cfd8dc 0%, #90a4ae 100%); font-family: 'Montserrat', sans-serif; min-height: 100vh; display: flex; align-items: center; }
.glass-card { max-width: 600px; margin: auto; background: rgba(255, 255, 255, 0.95); border-radius: 30px; padding: 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
.car-grid { max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 15px; margin-bottom: 20px; padding: 10px; background: #fff; }
.car-option { padding: 10px; cursor: pointer; border-radius: 10px; margin-bottom: 5px; transition: 0.3s; border: 1px solid transparent; }
.car-option:hover { background: #f0f7ff; }
.car-option.active { background: #2ecc71; color: white; font-weight: bold; }
</style>
</head>
<body onload="mevcutBilgileriGetir()">
<div class="glass-card">
<h2 class="fw-bold text-center mb-4">GARAJA ARAÇ KAYDI</h2>
<input type="text" id="ad" class="form-control mb-3 p-3" placeholder="Sürücü Adı Soyadı">
<input type="text" id="plaka" class="form-control mb-3 p-3" placeholder="Plaka">
<label class="fw-bold mb-2">Elektrikli Model Seçiniz:</label>
<div class="car-grid" id="carGrid"></div>
<button onclick="kaydet()" class="btn btn-dark w-100 py-3 rounded-pill fw-bold">BİLGİLERİ GÜNCELLE VE DÖN</button>
</div>
<script>
const cars = ["Tesla Model Y", "Togg T10X", "Porsche Taycan", "Hyundai IONIQ 5", "BMW i4", "Mercedes EQS", "Audi Q4 e-tron", "Kia EV6", "Volvo XC40 Recharge", "Renault Zoe", "Skywell ET5", "MG4 Electric", "Fiat 500e"];
let selectedCar = "";
const grid = document.getElementById('carGrid');
cars.forEach(car => {
const d = document.createElement('div');
d.className = 'car-option';
d.innerText = car;
d.onclick = () => {
selectedCar = car;
document.querySelectorAll('.car-option').forEach(x => x.classList.remove('active'));
d.classList.add('active');
};
grid.appendChild(d);
});
function mevcutBilgileriGetir() {
fetch('/api/kullanici').then(res => res.json()).then(data => {
if(data) {
document.getElementById('ad').value = data.ad;
document.getElementById('plaka').value = data.plaka;
selectedCar = data.arac;
document.querySelectorAll('.car-option').forEach(opt => {
if(opt.innerText === data.arac) opt.classList.add('active');
});
}
});
}
function kaydet() {
const ad = document.getElementById('ad').value;
const plaka = document.getElementById('plaka').value;
if(!ad || !selectedCar || !plaka) return alert("Eksik bilgi!");
fetch('/api/kaydet', {
method: 'POST',
headers: {'Content-Type': 'application/json'},
body: JSON.stringify({ ad, arac: selectedCar, plaka })
}).then(() => window.location.href = "/");
}
</script>
</body>
</html>